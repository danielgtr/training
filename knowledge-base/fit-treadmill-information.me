# ğŸ§­ Informe TÃ©cnico: Estructura de Archivos FIT en Actividades Treadmill

Este informe resume los hallazgos obtenidos mediante **anÃ¡lisis empÃ­rico y exploraciÃ³n directa de archivos .fit generados en actividades tipo "treadmill"** (caminadora), utilizando datos exportados desde un dispositivo Garmin.

> **Nota importante:** Aunque algunas de las observaciones podrÃ­an estar presentes tambiÃ©n en otras modalidades (como running outdoor), **todo lo aquÃ­ documentado proviene especÃ­ficamente de archivos `treadmill`**, y **solo se afirma exclusividad si hay evidencia concluyente.**

---

## âœ… CaracterÃ­sticas Confirmadas de Actividades Treadmill en Archivos `.fit`

### 1. **IdentificaciÃ³n ExplÃ­cita del Tipo de Actividad**

* Campo `sub_sport = treadmill` presente en:

  * Mensaje `session`
  * Mensaje `lap`
  * Mensaje `sport`
* Campo `unknown_110 = 'Treadmill'` en mensaje `session`
* Campo `sport.name = 'Treadmill'`

> âœ… **Estos campos son marcadores exclusivos y confiables** de actividad tipo treadmill.

---

### 2. **Ausencia de Coordenadas GPS**

* NingÃºn mensaje contiene `position_lat` ni `position_long`
* No hay mensajes `event` relacionados con GPS

> âœ… Esta ausencia es tÃ­pica y esperada en actividades treadmill. **Confirmado como rasgo caracterÃ­stico.**

---

### 3. **Hora Local ImplÃ­cita en los Datos**

* Mensaje `activity` contiene `local_timestamp`
* Mensaje `session` contiene `start_time` en UTC
* Mensaje `timestamp_correlation` tambiÃ©n muestra ambos

> âœ… A partir de la diferencia (`local_timestamp - start_time`) se puede estimar la zona horaria configurada en el dispositivo (**UTC-6** en el ejemplo analizado).

---

### 4. **Cadencia Almacenada por Pierna**

* Campo `avg_running_cadence = 83`
* Cadencia real estimada = `83 x 2 = 166` spm
* Se aplica tambiÃ©n en `record`, `lap`, `session`

> âœ… Confirmado que **Garmin guarda cadencia por pierna**, y se debe multiplicar por 2 para obtener spm reales.

---

### 5. **Presencia de MÃ©tricas BiomecÃ¡nicas Avanzadas**

* Campos presentes en `record`, `lap`, `session`:

  * `stance_time`
  * `vertical_oscillation`
  * `vertical_ratio`
  * `step_length`
  * `fractional_cadence`

> âš ï¸ Aunque estos campos suelen provenir de sensores externos como el HRM-Pro Plus, en este caso se confirmaron **aun sin haber sido usado activamente un sensor HRM durante la actividad**. El reloj parece estimarlos internamente o los toma de sensores previos emparejados.

---

### 6. **Datos de Potencia y Trabajo**

* Campo `power` presente en `record`
* Campo `accumulated_power` acumulativo a lo largo de los segundos
* Campo `total_work` en `session` coincide con el Ãºltimo `accumulated_power`

> âœ… Confirmado: Garmin calcula `total_work` a partir del `record.accumulated_power`

---

### 7. **CalorÃ­as por Lap y Totales**

* Campo `total_calories` presente tanto en `session` como en cada `lap`
* La suma de calorÃ­as por lap concuerda (aproximadamente) con el total de sesiÃ³n

> âœ… Confirmado: Garmin desagrega calorÃ­as por lap incluso en treadmill

---

### 8. **Campos `unknown_XXX` Abundantemente Presentes**

* Tipos detectados: `unknown_140`, `unknown_216`, `unknown_312`, `unknown_313`, `unknown_233`, entre otros
* Algunos contienen nombres de sensores externos **que no estaban conectados durante la actividad**, sino previamente emparejados (ej. `'HRMPro+:604868'`, `'AirPo'`, `'X16'`)
* Otros contienen valores numÃ©ricos no triviales:

  * `unknown_168`, `unknown_178`, `unknown_196`, `unknown_192`, `unknown_193`
  * Algunos tienen posibles relaciones con carga de entrenamiento, eficiencia, etc.

> âš ï¸ **No se afirma que estos campos sean exclusivos de treadmill**, pero **su activaciÃ³n en este contexto sugiere codificaciÃ³n propietaria de Garmin para mÃ©tricas no pÃºblicas.**

---

## âš–ï¸ Comparaciones y Validaciones Internas

| Elemento Comparado                         | Resultado                        |
| ------------------------------------------ | -------------------------------- |
| `record.distance` vs `session.distance`    | âŒ Diferente (10,657m vs 10,000m) |
| `record.accumulated_power` vs `total_work` | âœ… Igual (1,040,138)              |
| `lap.total_timer_time` suma vs sesiÃ³n      | âœ… Muy cercano                    |

> ğŸ“Œ La discrepancia en distancia se debe a que Garmin permite ajustar manualmente la distancia de la caminadora al finalizar la actividad. En este caso, el usuario la ajustÃ³ a 10,000 metros, aunque los `records` acumulaban 10,657.

> ğŸ“Œ Ambos valores (`record.distance` y `session.distance`) son estimaciones: uno generado por el reloj, el otro por la caminadora. Ninguno debe considerarse como "real" por defecto; dependen de la calibraciÃ³n de cada fuente.

---

## ğŸ” Conclusiones Finales

* Los archivos `.fit` de treadmill **tienen una estructura rica y particular**, incluso sin GPS.
* Incluyen datos de rendimiento, biomecÃ¡nicos y energÃ©ticos que **no requieren ubicaciÃ³n geogrÃ¡fica para ser Ãºtiles**.
* Garmin parece codificar informaciÃ³n experimental o interna en campos `unknown_XXX`.
* Muchas de estas estructuras probablemente **no se documentan en el SDK oficial**, pero son consistentes y explotables empÃ­ricamente.

---

## ğŸ“ Archivos Analizados

* `19757483834_ACTIVITY-treadmill.fit` (actividad tipo treadmill, 10k)
* AnÃ¡lisis realizado mediante scripts personalizados en Python (`fitparse`, decodificaciÃ³n estructural, comparaciÃ³n cruzada)

